<div id="particles-js">
  
  <div class="header">
    <link href="https://fonts.googleapis.com/css?family=Lato:400,700&display=swap" rel="stylesheet">

      <h1>
        <span class="site-title">{{site.user_title}} {{site.username}}</span>
        <span class="site-description">{{site.user_job_title}}</span>
      </h1>
      <div class="header-icons">
        <a aria-label="E-Mail" href="mailto:jonalbo311@gmail.com"><i class="icon fas fa-envelope"></i></a>
        <a rel="me" aria-label="LinkedIn" target="_blank" href="https://www.linkedin.com/in/jonalbo"><i class="icon fab fa-linkedin" aria-hidden="true"></i></a>
        </div>
      <div class="header-links">
        <a class="link" href="https://www.jonalbo.com/particle_site/#about">About</a>
        ·
        <a class="link" href="https://www.jonalbo.com/particle_site/#projects">Projects</a>
        ·
        <a class="link" href="https://www.jonalbo.com/JonAlbo_Resume.pdf">Resume</a>
        ·
        <a class="link" href="https://patents.google.com/?inventor=Jon+ALBO">Patents</a>
        ·
        <a class="link" href="https://scholar.google.com/citations?user=0ug4j68AAAAJ">Publications</a>
        ·
        <a class="link" href="https://www.jonalbo.com/particle_site/news">In the News</a>
        ·
        <a class="link" href="https://www.jonalbo.com/photography.html">Photography</a>
      </div>
  </div>
  <a class="down" data-scroll><i class="icon fa fa-chevron-down" aria-hidden="true"></i></a>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const links = document.querySelectorAll('.header-links a');

  links.forEach(link => {
    const href = link.getAttribute('href');
    if (!href || !href.includes('#')) return;

    link.addEventListener('click', function(e) {
      const linkUrl = new URL(href, window.location.origin); // full URL object
      const targetHash = linkUrl.hash.substring(1); // remove the '#'
      const targetSection = document.getElementById(targetHash);
      if (!targetSection) return; // section doesn't exist on this page

      // Check if link points to homepage (ignore domain differences)
      const isHomeLink = linkUrl.pathname.endsWith('/') || linkUrl.pathname.endsWith('/index.html');
      const isOnHomePage = window.location.pathname.endsWith('/') || window.location.pathname.endsWith('/index.html');

      if (isHomeLink && isOnHomePage) {
        // Already on homepage → smooth scroll
        e.preventDefault();
        targetSection.scrollIntoView({ behavior: 'smooth' });
        history.pushState(null, '', '#' + targetHash); // update URL hash
      }
      // else → navigate normally to another page with hash
    });
  });

  // Down chevron scroll
  const downChevron = document.querySelector('.down');
  if (downChevron) {
    downChevron.addEventListener('click', function(e) {
      e.preventDefault();
      const firstSection = document.querySelector('section');
      if (firstSection) firstSection.scrollIntoView({ behavior: 'smooth' });
    });
  }
});
</script>
